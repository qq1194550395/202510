# YOLO格式转换功能说明

## 功能概述

数据集转换工具现在支持两种YOLO格式：

1. **YOLO检测格式** (`yolo`) - 用于目标检测，支持矩形框标注
2. **YOLO分割格式** (`yolo_seg`) - 用于目标分割，支持多边形标注和矩形框混合

## 格式详细说明

### YOLO检测格式 (yolo)
- **文件格式**: 每张图片对应一个同名的`.txt`文件
- **标注格式**: `class_id center_x center_y width height`
- **坐标系**: 归一化坐标 (0-1)
- **用途**: 目标检测任务

**示例**:
```
0 0.5 0.5 0.3 0.4
1 0.2 0.3 0.1 0.2
```

### YOLO分割格式 (yolo_seg)
- **文件格式**: 每张图片对应一个同名的`.txt`文件
- **支持两种标注类型**:
  - **矩形框**: `class_id center_x center_y width height` (5个值)
  - **多边形**: `class_id x1 y1 x2 y2 ... xn yn` (>5个值)
- **坐标系**: 归一化坐标 (0-1)
- **用途**: 目标分割任务，支持关键点分割

**示例**:
```
0 0.5 0.5 0.3 0.4
1 0.1 0.1 0.2 0.1 0.2 0.2 0.1 0.2
2 0.7 0.7 0.8 0.7 0.8 0.8 0.7 0.8 0.75 0.75
```

## 支持的转换路径

### 从YOLO检测格式转换
- YOLO检测 → VOC
- YOLO检测 → JSON
- YOLO检测 → YOLO分割 (矩形框转换)

### 从YOLO分割格式转换
- YOLO分割 → JSON (保留矩形框和多边形)
- YOLO分割 → YOLO检测 (只保留矩形框)

### 其他格式转换
- VOC → YOLO检测
- JSON → YOLO检测
- JSON → YOLO分割
- JSON → VOC

## GUI界面使用

1. 启动程序后选择"数据集格式转换"
2. 选择输入和输出目录
3. 点击相应的转换按钮:
   - **第一行**: 传统格式转换 (检测相关)
   - **第二行**: 分割格式转换
4. 可选择加载标签字典文件
5. 点击"开始转换"

## 注意事项

1. **数据兼容性**: YOLO分割格式向下兼容YOLO检测格式
2. **VOC限制**: VOC格式不支持多边形标注，转换时只保留矩形框
3. **JSON格式**: 支持矩形框和多边形的完整表示
4. **坐标归一化**: 所有YOLO格式使用归一化坐标 (0-1)
5. **文件命名**: 标注文件必须与图片文件同名 (扩展名不同)

## 数据结构

程序内部使用统一的数据结构:
- `BBox`: 矩形框标注 (xmin, ymin, xmax, ymax, label)
- `Polygon`: 多边形标注 (points, label)
- `ImageAnnotation`: 图片标注 (包含矩形框和多边形列表)

这种设计确保了不同格式间的无损转换。